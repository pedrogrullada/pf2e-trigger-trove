{
    "_id": "xtZCghvcDeL2xQNs",
    "description": "@Localize[TRIGGERTROVE.TrickstersMirrors.Trigger.AttackRolled.Description]",
    "folder": "Spells",
    "name": "Trickster's Mirrors (Attack Rolled)",
    "nodes": [
        {
            "_id": "hS2l2CKpknfJGdb8",
            "key": "attack-roll",
            "outputs": {
                "other": {
                    "ids": [
                        "WdXL5h0Td0hJ77rr.inputs.target"
                    ]
                },
                "out": {
                    "ids": [
                        "WdXL5h0Td0hJ77rr.inputs.in"
                    ]
                }
            },
            "position": {
                "x": 350,
                "y": 200
            },
            "type": "event"
        },
        {
            "_id": "WdXL5h0Td0hJ77rr",
            "inputs": {
                "in": {
                    "ids": [
                        "hS2l2CKpknfJGdb8.outputs.out"
                    ]
                },
                "target": {
                    "ids": [
                        "hS2l2CKpknfJGdb8.outputs.other"
                    ]
                },
                "uuid": {
                    "ids": [],
                    "value": "Compendium.pf2e-trigger-trove.auxiliary-items.Item.SlgTXSJRSL5UplfQ"
                }
            },
            "key": "has-item",
            "outputs": {
                "true": {
                    "ids": [
                        "Jimli45APh8UirgI.inputs.in"
                    ]
                }
            },
            "position": {
                "x": 542,
                "y": 226.75
            },
            "type": "condition"
        },
        {
            "_id": "s6Eh6XuTn3Iind0a",
            "inputs": {
                "in": {
                    "ids": [
                        "LAJhnVbnHYKA83kT.outputs.criticalSuccess",
                        "LAJhnVbnHYKA83kT.outputs.success"
                    ]
                },
                "slug": {
                    "ids": [],
                    "value": "tricksters-mirrors"
                },
                "target": {
                    "ids": [
                        "dak4h3XAih4ooRVE.outputs.output"
                    ]
                }
            },
            "key": "get-resource",
            "outputs": {
                "out": {
                    "ids": [
                        "8VbxGTl3Y3hva6uq.inputs.in"
                    ]
                },
                "value": {
                    "ids": [
                        "8VbxGTl3Y3hva6uq.inputs.x"
                    ]
                }
            },
            "position": {
                "x": 1493,
                "y": 340.75
            },
            "type": "action"
        },
        {
            "_id": "dak4h3XAih4ooRVE",
            "custom": {
                "inputs": [],
                "outputs": [
                    {
                        "custom": false,
                        "group": "",
                        "key": "output",
                        "type": "target"
                    }
                ],
                "outs": []
            },
            "key": "variable-getter",
            "outputs": {
                "output": {
                    "ids": [
                        "s6Eh6XuTn3Iind0a.inputs.target"
                    ]
                }
            },
            "position": {
                "x": 1340.5,
                "y": 497.25
            },
            "target": "hS2l2CKpknfJGdb8.outputs.other",
            "type": "variable"
        },
        {
            "_id": "LAJhnVbnHYKA83kT",
            "inputs": {
                "in": {
                    "ids": [
                        "uXcocAe16OzCFCJG.outputs.true"
                    ]
                },
                "input": {
                    "ids": [
                        "vkDWFJgjBLIv47oo.outputs.output"
                    ]
                }
            },
            "key": "success-splitter",
            "outputs": {
                "criticalSuccess": {
                    "ids": [
                        "s6Eh6XuTn3Iind0a.inputs.in"
                    ]
                },
                "failure": {
                    "ids": [
                        "xUJ0eF4yWIua74TO.inputs.in"
                    ]
                },
                "success": {
                    "ids": [
                        "s6Eh6XuTn3Iind0a.inputs.in"
                    ]
                }
            },
            "position": {
                "x": 1238.5,
                "y": 243
            },
            "type": "splitter"
        },
        {
            "_id": "vkDWFJgjBLIv47oo",
            "custom": {
                "inputs": [],
                "outputs": [
                    {
                        "custom": false,
                        "group": "",
                        "key": "output",
                        "type": "number"
                    }
                ],
                "outs": []
            },
            "key": "variable-getter",
            "outputs": {
                "output": {
                    "ids": [
                        "LAJhnVbnHYKA83kT.inputs.input"
                    ]
                }
            },
            "position": {
                "x": 1111.5,
                "y": 374.25
            },
            "target": "hS2l2CKpknfJGdb8.outputs.outcome",
            "type": "variable"
        },
        {
            "_id": "8VbxGTl3Y3hva6uq",
            "inputs": {
                "formula": {
                    "ids": [],
                    "value": "1 + @x"
                },
                "in": {
                    "ids": [
                        "s6Eh6XuTn3Iind0a.outputs.out"
                    ]
                },
                "x": {
                    "ids": [
                        "s6Eh6XuTn3Iind0a.outputs.value"
                    ]
                }
            },
            "key": "replace-x",
            "outputs": {
                "out": {
                    "ids": [
                        "4nnUcpQ6bizTaUpj.inputs.in"
                    ]
                },
                "result": {
                    "ids": [
                        "4nnUcpQ6bizTaUpj.inputs.formula"
                    ]
                }
            },
            "position": {
                "x": 1767,
                "y": 431.75
            },
            "type": "action"
        },
        {
            "_id": "9RH7RkP8tCNt6DzW",
            "inputs": {
                "in": {
                    "ids": [
                        "4nnUcpQ6bizTaUpj.outputs.out"
                    ]
                },
                "max": {
                    "ids": [
                        "4nnUcpQ6bizTaUpj.outputs.result"
                    ]
                },
                "min": {
                    "ids": [],
                    "value": 1
                }
            },
            "key": "random-number",
            "outputs": {
                "out": {
                    "ids": [
                        "cjP8FQhrwBPXX1mj.inputs.in"
                    ]
                },
                "result": {
                    "ids": [
                        "cjP8FQhrwBPXX1mj.inputs.a"
                    ]
                }
            },
            "position": {
                "x": 2302,
                "y": 437.75
            },
            "type": "action"
        },
        {
            "_id": "4nnUcpQ6bizTaUpj",
            "inputs": {
                "formula": {
                    "ids": [
                        "8VbxGTl3Y3hva6uq.outputs.result"
                    ]
                },
                "in": {
                    "ids": [
                        "8VbxGTl3Y3hva6uq.outputs.out"
                    ]
                }
            },
            "key": "resolve-formula",
            "outputs": {
                "out": {
                    "ids": [
                        "9RH7RkP8tCNt6DzW.inputs.in"
                    ]
                },
                "result": {
                    "ids": [
                        "9RH7RkP8tCNt6DzW.inputs.max"
                    ]
                }
            },
            "position": {
                "x": 2021.3899999999999,
                "y": 441.24
            },
            "type": "action"
        },
        {
            "_id": "cjP8FQhrwBPXX1mj",
            "inputs": {
                "a": {
                    "ids": [
                        "9RH7RkP8tCNt6DzW.outputs.result"
                    ]
                },
                "b": {
                    "ids": [],
                    "value": 1
                },
                "in": {
                    "ids": [
                        "9RH7RkP8tCNt6DzW.outputs.out"
                    ]
                }
            },
            "key": "eq-number",
            "outputs": {
                "false": {
                    "ids": [
                        "xUJ0eF4yWIua74TO.inputs.in"
                    ]
                },
                "true": {
                    "ids": [
                        "CD1DLwMzKeYto3l4.inputs.in"
                    ]
                }
            },
            "position": {
                "x": 2547,
                "y": 453.75
            },
            "type": "logic"
        },
        {
            "_id": "CD1DLwMzKeYto3l4",
            "inputs": {
                "in": {
                    "ids": [
                        "cjP8FQhrwBPXX1mj.outputs.true"
                    ]
                },
                "message": {
                    "ids": [],
                    "value": "<p><strong>Trickster's Mirror</strong> The attack hits you! All your mirrors remain.</p>"
                },
                "target": {
                    "ids": [
                        "iuKsSbDtKAOuRET1.outputs.output"
                    ]
                }
            },
            "key": "create-message",
            "position": {
                "x": 2793,
                "y": 477.75
            },
            "type": "action"
        },
        {
            "_id": "2fBEBKwImEWthqUb",
            "inputs": {
                "in": {
                    "ids": [
                        "H5Cl1yiSBiEERF3S.outputs.false"
                    ]
                },
                "message": {
                    "ids": [],
                    "value": "<p><strong>Trickster's Mirror</strong> The attack misses you! One of your mirrors is destroyed.</p>"
                },
                "target": {
                    "ids": [
                        "Um4EhLWvcOH40Mig.outputs.output"
                    ]
                }
            },
            "key": "create-message",
            "outputs": {
                "out": {
                    "ids": []
                }
            },
            "position": {
                "x": 3777,
                "y": 419.75
            },
            "type": "action"
        },
        {
            "_id": "xUJ0eF4yWIua74TO",
            "inputs": {
                "in": {
                    "ids": [
                        "cjP8FQhrwBPXX1mj.outputs.false",
                        "LAJhnVbnHYKA83kT.outputs.failure"
                    ]
                },
                "slug": {
                    "ids": [],
                    "value": "tricksters-mirrors"
                },
                "target": {
                    "ids": [
                        "iGKnpwRvBnjeKy3B.outputs.output"
                    ]
                }
            },
            "key": "reduce-resource",
            "outputs": {
                "out": {
                    "ids": [
                        "XsMZUTPCapzamquC.inputs.in"
                    ]
                }
            },
            "position": {
                "x": 2792,
                "y": 255.75
            },
            "type": "action"
        },
        {
            "_id": "iuKsSbDtKAOuRET1",
            "custom": {
                "inputs": [],
                "outputs": [
                    {
                        "custom": false,
                        "group": "",
                        "key": "output",
                        "type": "target"
                    }
                ],
                "outs": []
            },
            "key": "variable-getter",
            "outputs": {
                "output": {
                    "ids": [
                        "CD1DLwMzKeYto3l4.inputs.target"
                    ]
                }
            },
            "position": {
                "x": 2804.5,
                "y": 617.25
            },
            "target": "hS2l2CKpknfJGdb8.outputs.other",
            "type": "variable"
        },
        {
            "_id": "WqC4kcUG2LBHf6rd",
            "inputs": {
                "basic": {
                    "ids": [],
                    "value": true
                },
                "dc": {
                    "ids": []
                },
                "formula": {
                    "ids": [],
                    "value": "(ceil(@actor.level / 2))d4[mental]"
                },
                "in": {
                    "ids": [
                        "H5Cl1yiSBiEERF3S.outputs.true"
                    ]
                },
                "roll": {
                    "ids": [
                        "BdZRIveKt3thrLfM.outputs.roll"
                    ]
                },
                "save": {
                    "ids": [],
                    "value": "will"
                }
            },
            "key": "roll-damage-save",
            "position": {
                "x": 3771,
                "y": -10.25
            },
            "type": "action"
        },
        {
            "_id": "BdZRIveKt3thrLfM",
            "inputs": {
                "item": {
                    "ids": [
                        "mh2LPdmHG4fUmK5W.outputs.item"
                    ]
                },
                "note": {
                    "ids": [],
                    "value": "<p>The attack misses you! One of your mirrors is destroyed. If the attacker was within 5 feet, they must succeed at a @Check[will|basic|options:item:type:spell|traits:animist,focus,illusion,mental,visual] save or take mental damage as they believe themselves cut by a shower of glass shards from the breaking mirror.</p>"
                },
                "options": {
                    "ids": []
                },
                "origin": {
                    "ids": [
                        "CFzsn9RkQMlRj539.outputs.output"
                    ]
                },
                "traits": {
                    "ids": []
                }
            },
            "key": "roll-data",
            "outputs": {
                "roll": {
                    "ids": [
                        "WqC4kcUG2LBHf6rd.inputs.roll"
                    ]
                }
            },
            "position": {
                "x": 3493.5,
                "y": 34.25
            },
            "type": "value"
        },
        {
            "_id": "mh2LPdmHG4fUmK5W",
            "inputs": {
                "uuid": {
                    "ids": [],
                    "value": "Compendium.pf2e.spells-srd.Item.cuKVbWWNzJj1GDpZ"
                }
            },
            "key": "item-source",
            "outputs": {
                "item": {
                    "ids": [
                        "BdZRIveKt3thrLfM.inputs.item"
                    ]
                }
            },
            "position": {
                "x": 3262.5,
                "y": 130.25
            },
            "type": "value"
        },
        {
            "_id": "XsMZUTPCapzamquC",
            "inputs": {
                "a": {
                    "ids": [
                        "Um4EhLWvcOH40Mig.outputs.output"
                    ]
                },
                "b": {
                    "ids": [
                        "Kz8Kx5XCEhNg3sbk.outputs.output"
                    ]
                },
                "in": {
                    "ids": [
                        "xUJ0eF4yWIua74TO.outputs.out"
                    ]
                }
            },
            "key": "distance-between",
            "outputs": {
                "distance": {
                    "ids": [
                        "H5Cl1yiSBiEERF3S.inputs.a"
                    ]
                },
                "out": {
                    "ids": [
                        "H5Cl1yiSBiEERF3S.inputs.in"
                    ]
                }
            },
            "position": {
                "x": 3230.5,
                "y": 249.25
            },
            "type": "action"
        },
        {
            "_id": "Kz8Kx5XCEhNg3sbk",
            "custom": {
                "inputs": [],
                "outputs": [
                    {
                        "custom": false,
                        "group": "",
                        "key": "output",
                        "type": "target"
                    }
                ],
                "outs": []
            },
            "key": "variable-getter",
            "outputs": {
                "output": {
                    "ids": [
                        "XsMZUTPCapzamquC.inputs.b"
                    ]
                }
            },
            "position": {
                "x": 3114.5,
                "y": 388.25
            },
            "target": "hS2l2CKpknfJGdb8.outputs.this",
            "type": "variable"
        },
        {
            "_id": "Um4EhLWvcOH40Mig",
            "custom": {
                "inputs": [],
                "outputs": [
                    {
                        "custom": false,
                        "group": "",
                        "key": "output",
                        "type": "target"
                    }
                ],
                "outs": []
            },
            "key": "variable-getter",
            "outputs": {
                "output": {
                    "ids": [
                        "XsMZUTPCapzamquC.inputs.a",
                        "2fBEBKwImEWthqUb.inputs.target"
                    ]
                }
            },
            "position": {
                "x": 3155.5,
                "y": 430.25
            },
            "target": "hS2l2CKpknfJGdb8.outputs.other",
            "type": "variable"
        },
        {
            "_id": "H5Cl1yiSBiEERF3S",
            "inputs": {
                "a": {
                    "ids": [
                        "XsMZUTPCapzamquC.outputs.distance"
                    ]
                },
                "b": {
                    "ids": [],
                    "value": 5
                },
                "in": {
                    "ids": [
                        "XsMZUTPCapzamquC.outputs.out"
                    ]
                }
            },
            "key": "lte-number",
            "outputs": {
                "false": {
                    "ids": [
                        "2fBEBKwImEWthqUb.inputs.in"
                    ]
                },
                "true": {
                    "ids": [
                        "WqC4kcUG2LBHf6rd.inputs.in"
                    ]
                }
            },
            "position": {
                "x": 3466,
                "y": 270.75
            },
            "type": "logic"
        },
        {
            "_id": "CFzsn9RkQMlRj539",
            "custom": {
                "inputs": [],
                "outputs": [
                    {
                        "custom": false,
                        "group": "",
                        "key": "output",
                        "type": "target"
                    }
                ],
                "outs": []
            },
            "key": "variable-getter",
            "outputs": {
                "output": {
                    "ids": [
                        "BdZRIveKt3thrLfM.inputs.origin"
                    ]
                }
            },
            "position": {
                "x": 3322.5,
                "y": 87.25
            },
            "target": "hS2l2CKpknfJGdb8.outputs.other",
            "type": "variable"
        },
        {
            "_id": "iGKnpwRvBnjeKy3B",
            "custom": {
                "inputs": [],
                "outputs": [
                    {
                        "custom": false,
                        "group": "",
                        "key": "output",
                        "type": "target"
                    }
                ],
                "outs": []
            },
            "key": "variable-getter",
            "outputs": {
                "output": {
                    "ids": [
                        "xUJ0eF4yWIua74TO.inputs.target"
                    ]
                }
            },
            "position": {
                "x": 2794.5,
                "y": 443.25
            },
            "target": "hS2l2CKpknfJGdb8.outputs.other",
            "type": "variable"
        },
        {
            "_id": "Jimli45APh8UirgI",
            "inputs": {
                "in": {
                    "ids": [
                        "WdXL5h0Td0hJ77rr.outputs.true"
                    ]
                },
                "slug": {
                    "ids": [],
                    "value": "tricksters-mirrors"
                },
                "target": {
                    "ids": [
                        "228CEq35mphQ1k6j.outputs.output"
                    ]
                }
            },
            "key": "get-resource",
            "outputs": {
                "out": {
                    "ids": [
                        "uXcocAe16OzCFCJG.inputs.in"
                    ]
                },
                "value": {
                    "ids": [
                        "uXcocAe16OzCFCJG.inputs.a"
                    ]
                }
            },
            "position": {
                "x": 779,
                "y": 222.75
            },
            "type": "action"
        },
        {
            "_id": "228CEq35mphQ1k6j",
            "custom": {
                "inputs": [],
                "outputs": [
                    {
                        "custom": false,
                        "group": "",
                        "key": "output",
                        "type": "target"
                    }
                ],
                "outs": []
            },
            "inputs": {},
            "key": "variable-getter",
            "outputs": {
                "output": {
                    "ids": [
                        "Jimli45APh8UirgI.inputs.target"
                    ]
                }
            },
            "position": {
                "x": 629.5,
                "y": 354.25
            },
            "target": "hS2l2CKpknfJGdb8.outputs.other",
            "type": "variable"
        },
        {
            "_id": "uXcocAe16OzCFCJG",
            "inputs": {
                "a": {
                    "ids": [
                        "Jimli45APh8UirgI.outputs.value"
                    ]
                },
                "in": {
                    "ids": [
                        "Jimli45APh8UirgI.outputs.out"
                    ]
                }
            },
            "key": "gt-number",
            "outputs": {
                "true": {
                    "ids": [
                        "LAJhnVbnHYKA83kT.inputs.in"
                    ]
                }
            },
            "position": {
                "x": 1052,
                "y": 238.75
            },
            "type": "logic"
        }
    ]
}
